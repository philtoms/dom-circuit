const t=Symbol(),n="undefined"!=typeof window&&window.document,o=(n,[e,...i])=>i.length?o(n[e],i):n[e]&&n[e][t],e=(i,s,c)=>(f,r=1,u=[],d=[],h)=>{c||"function"==typeof s||(c=s||[],s=!1);const w=function(t,n,o){return o?s(f=t):f=void 0===t?f:u.reduce((o,[e,i,s])=>s?i.call(this,o)||o:e in f&&t[e]===f[e]?o:e===n?t:e in t?i.call(this,o,t[e]):o,f),s?s(f):f},y=(t,[i,y,b])=>{const[l,p,a,g,j]=i.match(/(([\w]+):)?(\s*(.+))?/),[O,m]=j.split(/[\s\.]on/),v=!(O in f)&&a||(O.startsWith("on")?O.slice(2):O).replace(/[#\.\-\[\]\(\)\"\=\^\&\/]/g,"");let x=O.startsWith("/")&&o(t,O.slice(1).split("/"));const A=!b&&O.startsWith("/");if(A)x=[],d.push([i,y,x]);else if(x)return b.forEach(t=>x.push(t)),t;const S=O.startsWith("on")?c:[].concat(c||n).reduce((t,n)=>[...t,...Array.from(n.querySelectorAll(O))],[]),$="function"!=typeof y&&e(y,t=>w({...f,[v]:t},v),S)(f[v]||{},r+1,x||[],d,A);u.push([v,h?function(t){_.call(this,t,!0)}:$?s:y,h]);const _=function(t,n){return t===f[v]?t:w.call(this,$?t:y.call(this,f,t),v,n)};if(m||O.startsWith("on")){const t=(m||O).replace(/(on)?(.+)/,"$2").toLowerCase();S.forEach(n=>{n.addEventListener(t,_)})}return t[a||"set_"+v]=t=>_(t)[v],Object.defineProperty(t,v,{get:()=>$||f[v],set:t=>_(t)[v]})},b=Object.entries(i).reduce(y,{[t]:u});return Object.defineProperty(1==r?d.reduce(y,b):b,"state",{get:()=>f})};export default e;